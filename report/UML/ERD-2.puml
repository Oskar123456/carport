@startuml
!theme mars
skinparam class {
BackgroundColor #FFFF99
}
skinparam linetype ortho

entity orders {
* <<pk>> id : serial
--
<<fk>> employee_id : bigint
<<fk>> customer_id : bigint
<<fk>> status_code : bigint
<<fk>> shipment_id : bigint
price : numeric
time_of_order : timestamp
note : varchar
}
entity status_code {
* <<pk>> id : serial
--
name : varchar
description : varchar
}
entity order_product {
* <<pk>> id : serial
--
<<fk>> order_id : bigint
<<fk>> product_id : bigint
quantity : bigint
}
entity product {
* <<pk>> id : serial
--
name : varchar
description : varchar
price : numeric
links : varchar[]
}
entity product_component {
* <<pk>> id : serial
--
<<fk>> product_id : bigint
<<fk>> component_id : bigint
quantity : bigint
}
entity product_documentation {
* <<pk>> id : serial
--
name : varchar
description : varchar
data : bytea
<<fk>> product_id
type : varchar
format : varchar
}
entity product_specification{
* <<pk>> id : serial
--
<<fk>> product_id : bigint
<<fk>> specification_id : bigint
details : varchar
}
entity category {
* <<pk>> id : serial
--
name : varchar
}
entity category_specification {
* <<pk>> id : serial
--
* (fk) category_id : int
* (fk) specification_id : int
}
entity product_category {
* <<pk>> id : serial
--
product_id : bigint
category_id : bigint
}
entity specification {
* <<pk>> id : serial
--
name : varchar
unit : varchar
}
entity image {
* <<pk>> id : serial
--
name : varchar
description : varchar
source : varchar
format : varchar
data : bytea
}
entity product_image {
* <<pk>> id : serial
--
(fk) product_id
(fk) image_id
(fk) image_downscaled_id
}
entity warehouse {
* <<pk>> id : serial
--
<<fk>> address_id : bigint
}
entity warehouse_product {
* <<pk>> id : serial
--
<<fk>> warehouse_id : bigint
<<fk>> product_id : bigint
quantity : bigint
}
entity users {
* <<pk>> id : serial
--
name : varchar
email : varchar
password : varchar
role : varchar
<<fk>> address : bigint
}
entity address {
* <<pk>> id : serial
--
street : varchar
number : bigint
floor : bigint
<<fk>> zip : bigint
}
entity zip_code {
code
--
city : varchar
}
entity shipment {
* <<pk>> id : serial
--
name : varchar
time_of_shipment : timestamp
time_of_delivery : timestamp
}
entity payment {
* <<pk>> id : serial
--
<<fk>> order_id : bigint
time_of_payment : timestamp
amount : numeric
details : varchar
}

order_product ||--|| orders
order_product ||--|| product

orders }o--|| shipment
orders ||--o| payment
orders }o--|{ "1..2  " users
orders }o--|| status_code

product ||--o{ product_category
product ||--o{ product_documentation
product ||--o{ product_specification
product ||--o{ product_component
product ||--o{ product_image

product_specification }o--|| specification

category ||--o{ category_specification
category_specification }o--|| specification

product_category }o--|| category

product_image "0..*   " }o--|{ "1..2  " image

warehouse_product }o--|| product
warehouse_product }o--|| warehouse
warehouse ||--|| address

users ||--|| address

address }o--|| zip_code

@enduml
